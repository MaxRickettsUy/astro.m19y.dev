---
import avatar from '../img/avatar.png';

import '../styles/styles.css';
import '../styles/footer.css';
import '../styles/header.css';
import '../styles/main.css';
import '../styles/new.css';
import '../styles/new-styles.css';
---

<header class="header">
    <nav class="navbar">
        <a href="/index.html"><img src={avatar} alt="avatar" class="avatar" /></a>
        <ul class="nav-menu">
          <li class="nav-item">
            <a href="/index.html" class="nav-link">/home</a>
          </li>
          <li class="nav-item">
            <a href="/pages/posts.html" class="nav-link">/posts</a>
          </li>
          <li class="nav-item">
            <a href="/pages/projects.html" class="nav-link">/projects</a>
          </li>
          <li class="nav-item">
            <a href="/pages/random.html" class="nav-link">/random</a>
          </li>
          <li class="nav-item">
            <a href="/pages/rwl.html" class="nav-link">/rwl</a>
          </li>
          <li class="nav-item">
            <div class="theme-switch-wrapper">
              <label class="theme-switch" for="checkbox">
              <input type="checkbox" id="checkbox" />
              <div class="slider round"></div>
              </label>
            </div>
          </li>
        </ul>
        <div class="hamburger">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
        </div>
    </nav>
</header>

<script>
    let hamburger, navMenu, navLink;

    const mobileMenu = () => {
        hamburger.classList.toggle("active");
        navMenu.classList.toggle("active");
    }
    
    const closeMenu = () => {
        hamburger.classList.remove("active");
        navMenu.classList.remove("active");
    }
    
    function switchTheme(e) {
        if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
        }
        else {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
        }
    }

    const toggleSwitch = document.querySelector('.theme-switch >  input');
    
    if(toggleSwitch) {
    toggleSwitch.addEventListener('change', switchTheme);
    }
    
    const currentTheme = localStorage.getItem('theme');
    
    if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);
    
        if (currentTheme === 'light') {
            toggleSwitch.checked = true;
        }
    }

    hamburger = document.querySelector(".hamburger");
    navMenu = document.querySelector(".nav-menu");
    navLink = document.querySelectorAll(".nav-link");

    if(hamburger) {
      hamburger.addEventListener("click", mobileMenu);
    }

    navLink.forEach(n => n.addEventListener("click", closeMenu));
</script>